<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Locked Google Form</title>
<style>
    body, html {
        margin: 0;
        padding: 0;
        overflow: hidden;
    }
    iframe {
        width: 100%;
        height: 100vh;
        overflow-y: auto;
        border: none;
    }
</style>
</head>
<body>

<iframe id="googleForm" src="https://docs.google.com/forms/d/e/1FAIpQLSdQ4Hcv50emaXa2ua2EbDdNgMUOSvXXf_BbK8lJ02eA6iMhEw/viewform?embedded=true" frameborder="0" scrolling="no"></iframe>

<script>
// Function to show the initial warning
function showInitialWarning() {
    alert("Do not leave this page, as cheating is blacklisted in this form. If you proceed to leave, you will not be able to participate in the trivia.");
}

// Function to show the secondary warning
function showSecondaryWarning() {
    alert("You have been restricted from answering this form. Reason: potential cheating.");
    // Restrict user from accessing the form
    document.getElementById('googleForm').style.display = 'none';
}

// Function to check if warned=1 is stored and act accordingly
function checkWarnedStatus() {
    if (localStorage.getItem("warned") === "1") {
        showSecondaryWarning();
    } else {
        showInitialWarning();
    }
}

// Event listener for page load
window.addEventListener("load", function() {
    checkWarnedStatus();
});

// Function to handle visibility change
function handleVisibilityChange() {
    if (document.hidden) {
        // Tab unfocused
        if (localStorage.getItem("warned") !== "1") {
            // Show initial warning if not previously warned
            showInitialWarning();
        }
    } else {
        // Tab focused again
        if (localStorage.getItem("warned") === "1") {
            // Show secondary warning if previously warned
            showSecondaryWarning();
        }
    }
}

// Event listener for tab visibility change
document.addEventListener("visibilitychange", handleVisibilityChange, false);
</script>

<script>
// Check if the user is restricted and reload the page if necessary
if (localStorage.getItem("warned") === "1") {
    // Clear the restriction status
    localStorage.removeItem("warned");
    // Reload the page
    location.reload();
}
</script>

</body>
</html>
